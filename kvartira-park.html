<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Квартира у парка — HAREST</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="owner">
        <div class="brand">
          <span class="brand-logo" aria-hidden="true">
            <img src="./logo_no.png" alt="HAREST" class="brand-logo-img" />
          </span>
          <div>
            <div class="owner-name">HAREST</div>
            <div class="owner-sub">Квартира у парка</div>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <nav class="main-nav" aria-label="menu">
          <a class="nav-link" href="index.html">Главная</a>
          <a class="nav-link" href="contacts.html">Контакты</a>
          <a class="nav-link" href="reviews.html">Отзывы</a>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="gallery" data-gallery data-gallery-key="park">
      <div class="card gallery-main">
        <div class="carousel-stage" data-stage>
          <img class="card-image" src="kvartira-park.png" alt="Квартира у парка">
        </div>
        <button class="carousel-arrow left" data-prev aria-label="Предыдущее">&#10094;</button>
        <button class="carousel-arrow right" data-next aria-label="Следующее">&#10095;</button>
      </div>

      <div class="gallery-thumbs" data-thumbs></div>
    </section>

    <section class="details">
      <h1 class="price">3500 ₽/сутки · <span class="muted">или 70 000 ₽/месяц</span></h1>

      <div class="specs">
        <div class="spec">Площадь: <strong>48 м²</strong></div>
        <div class="spec">Комнаты: <strong>2</strong></div>
        <div class="spec">Двор: <strong>тихий</strong></div>
        <div class="spec">Рядом: <strong>парк, детский сад</strong></div>
      </div>

      <p class="desc"><strong>Описание:</strong> Идеальный вариант для семьи с детьми. Рядом детский сад, школа и парк. В квартире есть детская кроватка, стульчик для кормления, игрушки.</p>

      <div class="contact-block">
        <h3>Контакты</h3>
        <p>Телефон: <a href="tel:+79198729797">+7 (919) 872-97-97</a></p>
        <div class="messengers">
          <a href="https://t.me/LaraHouseTGN" target="_blank" rel="noopener">Telegram</a>
          <a href="https://wa.me/79198729797" target="_blank" rel="noopener">WhatsApp</a>
          <a href="tel:+79198729797">Позвонить</a>
        </div>
      </div>

      <div class="links">
        <small>Смотрите на популярных площадках:</small>
        <div class="platforms">
          <a class="icon-link" href="#" aria-label="Avito">
            <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
              <circle cx="7.5" cy="8.5" r="3.2" fill="#00AEEF"/>
              <circle cx="12.5" cy="8.5" r="3.2" fill="#7AC943"/>
              <circle cx="17.5" cy="8.5" r="3.2" fill="#FF5A5F"/>
            </svg>
          </a>
          <a class="icon-link" href="#" aria-label="Cian">
            <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5A2.5 2.5 0 1 1 12 6.5a2.5 2.5 0 0 1 0 5z" fill="#0B74E6"/>
            </svg>
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="contact">
        <h3 class="contact-title">Свяжитесь со мной</h3>
        <p class="contact-item">Телефон: <a href="tel:+79198729797">+7 (919) 872-97-97</a></p>
        <p class="contact-item">Email: <a href="mailto:harmonyisrest@gmail.com">harmonyisrest@gmail.com</a></p>
      </div>
      <div class="map">
        <div class="map-box"><div><strong>Ростовская обл.</strong></div><div>г. Таганрог</div></div>
      </div>
    </div>
    <div class="footer-note">© HAREST — аренда жилья без посредниками</div>
  </footer>

  <script src="script.js"></script>
  <script>
    (function() {
      const galleryKey = 'park';

      function loadDataFromStorage() {
        try {
          const raw = localStorage.getItem('gallery_' + galleryKey);
          if (!raw) return null;
          const parsed = JSON.parse(raw);
          if (parsed && typeof parsed === 'object' && Array.isArray(parsed.images)) {
            return parsed;
          }
        } catch (e) {
          console.warn('Не удалось загрузить данные из хранилища', e);
        }
        return null;
      }

      function applyDataToPage(data) {
        if (!data) return;

        const gallerySection = document.querySelector('[data-gallery][data-gallery-key="' + galleryKey + '"]');
        if (gallerySection) {
          const stage = gallerySection.querySelector('[data-stage]');
          if (stage && data.images && data.images.length > 0) {
            stage.innerHTML = '';
            data.images.forEach(imgData => {
              const img = document.createElement('img');
              img.className = 'card-image';
              img.src = imgData.src || '';
              img.alt = imgData.alt || '';
              stage.appendChild(img);
            });
          }
        }

        const meta = data.meta || {};
        
        if (meta.title) {
          document.title = meta.title + ' — HAREST';
          const ownerSub = document.querySelector('.owner-sub');
          if (ownerSub) ownerSub.textContent = meta.title;
        }

        const priceElement = document.querySelector('.price');
        if (priceElement && meta.price) {
          priceElement.innerHTML = meta.price;
        }

        const descElement = document.querySelector('.desc');
        if (descElement && meta.description) {
          const strong = descElement.querySelector('strong');
          if (strong) {
            strong.nextSibling ? strong.nextSibling.textContent = ' ' + meta.description : descElement.innerHTML = '<strong>Описание:</strong> ' + meta.description;
          } else {
            descElement.innerHTML = '<strong>Описание:</strong> ' + meta.description;
          }
        }

        const specsContainer = document.querySelector('.specs');
        if (specsContainer && meta.specs && Array.isArray(meta.specs)) {
          specsContainer.innerHTML = '';
          meta.specs.forEach(specText => {
            if (specText.trim()) {
              const specDiv = document.createElement('div');
              specDiv.className = 'spec';
              specDiv.textContent = specText;
              specsContainer.appendChild(specDiv);
            }
          });
        }
      }

      document.addEventListener('DOMContentLoaded', function() {
        const storedData = loadDataFromStorage();
        applyDataToPage(storedData);
      });

      window.addEventListener('storage', function(e) {
        if (e.key === ('gallery_' + galleryKey)) {
          if (e.newValue) {
            try {
              const newData = JSON.parse(e.newValue);
              applyDataToPage(newData);
            } catch (ex) {
              console.warn('Ошибка при обновлении данных', ex);
            }
          }
        }
      });
    })();
  </script>
</body>
</html>